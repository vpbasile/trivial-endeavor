(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),s=a(1),l=a(5),i=a.n(l),u=a(6),d=a(7),g=a(11),m=a(8),p=a(12),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",null,r.a.createElement("p",null,"An error occurred."),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),t}(r.a.Component),h=a(10);function v(e){var t,a=e.whatsHappening,n=e.setwhatsHappening,c=a.currentPlayerIndex,o=e.scoreState,s=e.setScoreState,l=e.phases,i=o.map(function(e){return r.a.createElement("div",{className:"form-group row",key:e.name+"namefield"},r.a.createElement("div",{className:"col-12 py-1 my-1",id:""},r.a.createElement("label",{htmlFor:e.name+"name"},e.name)))}),u=r.a.createElement("button",{className:"rounded py-2 my-2 border btn cat-sport w-100",type:"button",disabled:!(o.length<4),onClick:function(){return s([].concat(Object(h.a)(o),[{index:o.length,name:"Player "+(o.length+1),correctCategories:[],wonPlace:0}]))}},"Add another team");t=r.a.createElement("button",{className:"rounded py-2 my-2 border btn cat-geography w-100",type:"button",disabled:1===o.length,onClick:function(){return s(o.slice(0,o.length-1))}},"Remove a team");var d=r.a.createElement("button",{className:"rounded py-2 my-2 border btn btn-light w-100",type:"button",onClick:function(){console.log("Begin game");var e=l.find(function(e){return"Select"===e.title});e&&n({currentPhase:e,currentPlayerIndex:c})}},"Begin Game");return"Welcome"===a.currentPhase.title?r.a.createElement("div",{className:"row py-5 bg-dark bg-opacity-50"},r.a.createElement("div",{id:"playerList-div",className:"col-md-6 text-center"},r.a.createElement("h2",{id:"display-category"},"You can play with up to 4 teams."),i),r.a.createElement("div",{className:"col-md-6"},t,d,u)):null}function f(e){var t=e.whatsHappening,a=e.currentQuestion;if(void 0===a)return null;var n=e.guessedState,c=e.setGuessedState,o=e.categoryList,s=e.index,l=e.text,i=e.handleGuess,u=e.cssClasses,d=t.currentPlayerIndex,g=a.categoryTag,m=o.filter(function(e){return e.queryTag===g})[0].cssClass.replace("cat-","text-");void 0===u&&(u="rounded py-2 my-2 border btn btn-dark w-100 ".concat(m));var p="choice-".concat(s);return r.a.createElement("div",null,r.a.createElement("input",{className:u,type:"button",value:l,id:p,disabled:n,onClick:function(){c(!0),i(s,d,g)}}))}function b(e){var t=e.devMode,a=e.neededToWin,n=e.whatsHappening,c=e.setwhatsHappening;if(!t&&"Welcome"===n.currentPhase.title)return null;var o=e.currentQuestion,s=e.setCurrentQuestion,l=o.categoryTag,i=e.scoreState,u=e.setScoreState,d=e.guessedState,g=e.setGuessedState,m=e.vyingForPlace,p=e.categoryList,y=e.phases,h=o.questionText,v=o.choices,b=i.length,w=p.filter(function(e){return e.queryTag===l})[0],E=w.cssClass;function S(t,n,r){var l=i[n];console.log("".concat(l.name," guesses ").concat(t));var d=o;d.guessEntered=t,s(d);var g=y.find(function(e){return"Answer"===e.title});g&&c({currentPhase:g,currentPlayerIndex:n});var p=e.currentQuestion,h=p.correctIndex;if(t===h){console.log("Correct! ".concat(l.name," has completed the ").concat(w.title," category"));var v=function(e,t){var a=i;a[e].correctCategories.push(t);var n=a[e].correctCategories.length;return u(a),n}(n,r);console.log("".concat(l.name,"'s score: ").concat(JSON.stringify(v),"/").concat(a)),v>=a&&(console.log("".concat(i[n].name," has gotten enough points!")),i[n].wonPlace=m,e.SETvyingForPlace(m+1))}else console.log("Incorrect!  The correct answer was: ".concat(h," ").concat(p.choices[h]));var f=function(e,t,a,n){console.log("Finding next player");for(var r=1;r<t;r++){var c=(e+r)%t,o=n[c],s=o.correctCategories.length;if(console.log("Should ".concat(o.name," be next?  Their score is ").concat(s,"/").concat(a)),s<a)return console.log("".concat(o.name," is next.")),c}return(e+1)%t}(n,b,a,i),E=e.phases.find(function(e){return"Select"===e.title});E&&c({currentPhase:E,currentPlayerIndex:f}),console.log("===== <> Now it is ".concat(i[f].name,"'s turn <> ====="))}var k=0,x=v.map(function(t){var a=" text-wrap rounded py-2 my-2 border w-100 btn";return null===t?r.a.createElement(f,{categoryList:p,guessedState:d,setGuessedState:g,key:k,index:k++,text:"Please select a category",disabled:!0,cssClasses:a,scoreState:i,setScoreState:u,currentQuestion:o,handleGuess:S,whatsHappening:n}):(e.guessedState?k===o.correctIndex?a+=" btn-success":k===o.guessEntered?a+=" btn-danger":a+=" btn-dark":a+=" btn-dark",r.a.createElement(f,{categoryList:p,scoreState:i,setScoreState:u,whatsHappening:n,guessedState:d,setGuessedState:g,key:k,index:k++,text:t,disabled:null===o.guessEntered,cssClasses:a,currentQuestion:o,handleGuess:S}))});return void 0===E&&(E="blackandwhite"),E="py-2 my-2 btn w-100 ".concat(E),r.a.createElement("div",{className:"card bg-dark mb-3"},r.a.createElement("div",{id:"collapse-card",className:"card-body"},r.a.createElement("h2",{id:"display-category",className:E},w.title),r.a.createElement("p",{className:"card-text btn btn-dark w-100",id:"display-question"},h),x))}function w(e){var t=e.devMode,a=e.toggleDevMode,n=e.whatsHappening,c=e.scoreState[n.currentPlayerIndex];return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",defaultChecked:t,onClick:a}),r.a.createElement("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault"},t?"Development Mode: On":"Development Mode: Off"),t?r.a.createElement("div",null,r.a.createElement("h3",null,"Player: ",c.name),r.a.createElement("h3",null,"Phase: ",n.currentPhase.title),r.a.createElement("p",null,"Choosing a category with development mode on will hide the values of the answer choices and will instead display which is the correct choice."),e.children):null))}var E=a(2),S=a.n(E),k=a(9);function x(e){var t=e.devMode,a=e.whatsHappening,n=e.setwhatsHappening,c=e.setCurrentQuestion,o=e.setGuessedState,s=(e.vyingForPlace,e.categoryList),l=e.phases,i=e.player,u=e.category,d=u.cssClass+" w-100  text-wrap";function g(e,t){var a=l.find(function(e){return"Answer"===e.title});a&&n({currentPhase:a,currentPlayerIndex:e});var r=t.title;console.log("".concat(i.name," requests a ").concat(r," question"));var s="https://the-trivia-api.com/api/questions?categories=".concat(t.queryTag,"&limit=1"),u={categoryTag:t.queryTag,questionText:"Loading...",choices:["Loading...","Loading...","Loading...","Loading..."],correctAnswer:"Loading...",correctIndex:0,guessEntered:0};o(!1),c(u),function(e){m.apply(this,arguments)}(s)}function m(){return(m=Object(k.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:fetch(t).then(function(e){return e.json()}).then(function(e){p(e[0])}).catch(function(e){console.log(e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(e){console.log("Parsing question");var a=e.incorrectAnswers.slice(0,4),n=a.length+1;!function(e){var t=e.length;for(;0!==t;){var a=Math.floor(Math.random()*t),n=e[t-=1];e[t]=e[a],e[a]=n}}(a);var r=Math.floor(Math.random()*n),o=["","","",""];o[r]=e.correctAnswer;for(var l=0;l<n;l++)if(l===r)o[l]=e.correctAnswer;else{var i=a.pop();void 0!==i&&(o[l]=i)}var u=e.category,d=s.filter(function(e){return e.title===u})[0].queryTag,g={questionText:e.question,choices:o,correctAnswer:e.correctAnswer,correctIndex:r,categoryTag:d,guessEntered:0};console.log("Attempting to save question");try{fetch("http://localhost:8000/trivia/save/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})}catch(p){console.log("Error encountered."),console.error(p.message)}if(t){console.log("=====Hiding answers=====");var m=0;o.forEach(function(){m===g.correctIndex?g.choices[m]="Correct answer":g.choices[m]="Incorrect answer",m++})}c(g)}var y="btn btn-lg btn-block  text-wrap my-1",h="".concat(y," ").concat(d),v="".concat(y," ").concat(d),f=i.name+"_"+u.queryTag,b="".concat(y," btn-dark ").concat(d.replace("cat-","text-")),w=r.a.createElement("input",{key:f,className:"".concat(y," gold bg-gradient w-100"),type:"button",value:"1st place!",disabled:!0}),E=r.a.createElement("input",{key:f,className:"".concat(y," silver bg-gradient w-100"),type:"button",value:"2nd place!",disabled:!0}),x=r.a.createElement("input",{key:f,className:"".concat(y," bronze bg-gradient w-100"),type:"button",value:"3rd place!",disabled:!0});if("Welcome"===a.currentPhase.title)return r.a.createElement("input",{key:f,className:b,type:"button",value:u.title,disabled:!0});var T=i.wonPlace;if(T)switch(T){case 1:return w;case 2:return E;case 3:return x}return i.correctCategories.includes(u.queryTag)?r.a.createElement("input",{key:f,className:h,type:"button",value:"\u2713",disabled:!0}):i.index===a.currentPlayerIndex?r.a.createElement("input",{className:v,type:"button",value:u.title,onClick:function(){return g(i.index,u)}}):r.a.createElement("input",{key:f,className:b,type:"button",value:u.title,disabled:!0})}function T(e){var t=e.devMode,a=e.whatsHappening,n=e.setwhatsHappening,c=e.currentQuestion,o=e.setCurrentQuestion,s=e.scoreState,l=e.guessedState,i=e.setGuessedState,u=e.vyingForPlace,d=(e.SETvyingForPlace,e.categoryList),g=e.phases,m=e.player,p=12/s.length;return r.a.createElement("div",{className:"col-lg-"+p+" py-2 my-2 bg-dark bg-opacity-50",id:""},r.a.createElement("input",{className:"w-100 text-wrap py-1 my-1 playerBadge",type:"button",value:m.name,disabled:!0}),d.map(function(e){return"none"!==e.queryTag?r.a.createElement(x,{key:e.key,devMode:t,whatsHappening:a,setwhatsHappening:n,currentQuestion:c,setCurrentQuestion:o,scoreState:s,guessedState:l,setGuessedState:i,vyingForPlace:u,categoryList:d,phases:g,category:e,player:m}):null}))}function C(e){return r.a.createElement("div",{className:"col-6"},r.a.createElement("a",{href:e.url},e.text))}var N=[{index:0,name:"Player 1",correctCategories:[],wonPlace:0}];function P(e){var t=e.categoryList,a=e.phases,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=o[0],u=o[1];var d=Object(n.useState)({currentPhase:a[0],currentPlayerIndex:0}),g=Object(s.a)(d,2),m=g[0],p=g[1],h={questionText:null,choices:["","","",""],correctAnswer:null,correctIndex:0,categoryTag:t[0].queryTag,guessEntered:0},f=Object(n.useState)(h),E=Object(s.a)(f,2),S=E[0],k=E[1],x=Object(n.useState)(1),P=Object(s.a)(x,2),q=P[0],H=P[1],O=Object(n.useState)(!1),I=Object(s.a)(O,2),j=I[0],L=I[1],M=Object(n.useState)(N),Q=Object(s.a)(M,2),A=Q[0],F=Q[1];return r.a.createElement("div",{className:"App container"},r.a.createElement("div",{id:"logo-row",className:"row"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("img",{src:i.a,className:"App-logo w-75 py-5",alt:"Trivial Endeavor logo"}),r.a.createElement("p",{className:"fancy-font"},"by ",r.a.createElement("a",{href:"https://www.schmincenzo.com",target:"_blank",rel:"noopener noreferrer"},"Schmincenzo")))),r.a.createElement("div",{id:"gameBoard-row",className:"row"},r.a.createElement(y,null,r.a.createElement("div",{className:"col-12"},r.a.createElement(b,{key:"currentQuestion",devMode:l,neededToWin:function(t){return t?2:e.neededToWin}(l),whatsHappening:m,setwhatsHappening:p,currentQuestion:S,setCurrentQuestion:k,questionCategoryTag:S.categoryTag,scoreState:A,setScoreState:F,guessedState:j,setGuessedState:L,vyingForPlace:q,SETvyingForPlace:H,categoryList:t,phases:a}),r.a.createElement(v,{whatsHappening:m,setwhatsHappening:p,scoreState:A,setScoreState:F,phases:a})))),r.a.createElement("div",{id:"scoreboard-row",className:"row"},r.a.createElement(y,null,A.map(function(e,n){return r.a.createElement(T,{key:e.name+"playerColumn",player:e,categoryList:t,scoreState:A,phases:a,whatsHappening:m,setwhatsHappening:p,vyingForPlace:q,SETvyingForPlace:H,currentQuestion:S,setCurrentQuestion:k,guessedState:j,setGuessedState:L,devMode:l})}))),r.a.createElement("div",{id:"footer-row",className:"row"},r.a.createElement("div",{id:"credits-col",className:"col-12 border border-1 p-3 mt-5"},r.a.createElement("h3",null,"Version 1.4"),r.a.createElement(C,{url:"https://vpbasile.github.io/trivial-endeavor",text:"Live version"}),r.a.createElement(C,{url:"https://github.com/vpbasile/trivial-endeavor",text:"Repository on GitHub"}),r.a.createElement(C,{url:"https://the-trivia-api.com/",text:"The Trivia API by Will Fry"})),r.a.createElement("div",{id:"dev-col",className:"col-12 border border-1 p-3 my-5"},r.a.createElement(y,null,r.a.createElement(w,{players:N,scoreState:A,whatsHappening:m,devMode:l,toggleDevMode:function(){u(!l),l?console.log("Dev mode off"):console.log("Dev mode on")}},r.a.createElement("p",null,"'Needed to win' is set to 2 when in dev mode"),r.a.createElement("p",null,"Vying for place: ",q))))))}a(20),a(22),a(24),a(26);var q=[{key:"00",queryTag:"none",title:"Select a category",cssClass:"blackandwhite"},{key:"01",queryTag:"food_and_drink",title:"Food & Drink",cssClass:"cat-food"},{key:"05",queryTag:"sport_and_leisure",title:"Sport & Leisure",cssClass:"cat-sport"},{key:"08",queryTag:"science",title:"Science",cssClass:"cat-science"},{key:"04",queryTag:"history",title:"History",cssClass:"cat-history"},{key:"02",queryTag:"geography",title:"Geography",cssClass:"cat-geography"},{key:"06",queryTag:"movies",title:"Film & TV",cssClass:"cat-movies"},{key:"07",queryTag:"music",title:"Music",cssClass:"cat-music"},{key:"03",queryTag:"general_knowledge",title:"General Knowledge",cssClass:"cat-general"}],H=q.length-1;console.log("Beginning rendering of Trivial Endeavor"),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null,r.a.createElement(P,{categoryList:q,neededToWin:H,phases:[{key:"00",title:"Welcome",index:1},{key:"02",title:"Select",index:2},{key:"04",title:"Question",index:4},{key:"06",title:"Answer",index:6},{key:"08",title:"Score",index:8},{key:"10",title:"End",index:10}]}))),document.getElementById("root"))},5:function(e,t,a){e.exports=a.p+"static/media/trivialEndeavorLogo0.1c763c09.svg"}},[[13,2,1]]]);
//# sourceMappingURL=main.08f04556.chunk.js.map